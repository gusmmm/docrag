# 2025-08-20: RAG preparation step

- Added Step 3 script `src/12_remove_refs_clean.py`:
  - Discovers MDs under `output/papers/*/md_with_images/`.
  - Skips if `<stem>-RAG.md` already exists.
  - Extracts references to `references.json` using `agents/references_agent.py`.
  - Strips references via `src/02_1_strip_refs.py` logic (in-memory).
  - Cleans non-scientific boilerplate using `agents/md_clean_agent.py` (rule-based by default).
  - Writes cleaned result as `<stem>-RAG.md` in the same directory.
- Orchestrator `main.py`: added `prepare-rag` subcommand.
- Updated `PIPELINE.MD` with Step 2 and Step 3 instructions and defaults.

Notes:
- References extraction requires GOOGLE_API_KEY or GEMINI_API_KEY; if not set, the step skips gracefully.
- Cleaning preserves YAML front matter verbatim and focuses on scientific content.
