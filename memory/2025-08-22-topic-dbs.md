## Topic-aware Milvus databases

Date: 2025-08-22

Changes
- input/input.py: ingest recognizes input/topics/<topic>/ and stores `topic` in input/input_pdf.json.
- src/11_create_md_with_images.py: finds PDFs by citation_key in input/pdf/ or input/topics/<topic>/.
- src/14_index.py: metadata rows always go to meta DB (papers_meta in `--meta-db-name`, default journal_papers). Chunk rows go to DB named after `topic` (or `--db-name` if empty). When named DBs are unsupported/unavailable, fall back to default DB and use suffixed collection names `paper_chunks__<topic>`.
- chatbot/db_agent.py: can search across multiple DBs via `ADK_DB_LIST`. When named DBs unsupported, searches suffixed collections `paper_chunks__<db>`.

Usage
- Place PDFs under input/pdf/ or input/topics/<topic>/, then run `uv run python main.py full`.
- To query across topic DBs in chatbot: set `ADK_DB_LIST=journal_papers,<topic1>,<topic2>` and `ADK_COLLECTION=paper_chunks`.

Notes
- Fallback collection suffixing ensures indexing/search works even when Milvus named databases are not enabled. Attu will show collections like `paper_chunks__renal_replacement_therapy` in the default database.